<?xml version="1.0" encoding="UTF-8" ?>
<project name="ParaTask" basedir=".">

	<property name="src.dir" location="src"/>
	
	<property name="dist.dir" location="dist"/>
	<property name="classes.dir" location="${dist.dir}/classes"/>
	<property name="classes.main.dir" location="${classes.dir}/main"/>
	<property name="classes.bench.dir" location="${classes.dir}/benchmarks"/>

	<property name="paratask.jar" value="ParaTaskJava8.jar"/>
	<property name="benchmarks.jar" value="ParaTaskBenchmarks.jar"/>
	
	<property name="benchmarks.runner.lib.dir" value="../ParaTaskBenchmarksRunner/lib" />
	<property name="benchmarks.wrapper.lib.dir" value="../ParaTaskBenchmarksWrapper/lib" />
	
	<target name="clean" description="Clean up the existing build.">
		<delete dir="${classes.dir}" />
	</target>
	
	<target name="copy.jars.to.benchmarks.runner" depends="dist">
		<copy file="${dist.dir}/${paratask.jar}" todir="${benchmarks.runner.lib.dir}" />
		<copy file="${dist.dir}/${benchmarks.jar}" todir="${benchmarks.runner.lib.dir}" />
		<copy file="${dist.dir}/${paratask.jar}" todir="${benchmarks.wrapper.lib.dir}" />
		<copy file="${dist.dir}/${benchmarks.jar}" todir="${benchmarks.wrapper.lib.dir}" />
	</target>
	
	<target name="dist">
		<!-- Ant 1.8 has bug to work with Java 8, so just use the class files
			generated by eclipse. -->
		<jar jarfile="${dist.dir}/${paratask.jar}" basedir="${classes.main.dir}" />
		<jar jarfile="${dist.dir}/${benchmarks.jar}" basedir="${classes.bench.dir}" />
	</target>	
	
</project>